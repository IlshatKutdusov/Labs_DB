USE master
GO
/* DROP DATABASE KUTDUSOV4310LAB1_snapshot
DROP DATABASE KUTDUSOV4310LAB1 */
CREATE DATABASE KUTDUSOV4310LAB1
ON
( NAME = KUTDUSOV4310LAB1_DATA,
    FILENAME = 'C:\Users\800216\source\repos\Labs_DB\Lab1_DB_SQL_DATABASE\KUTDUSOV4310LAB1_DATA.mdf',
    SIZE = 4MB,
    MAXSIZE = 10MB,
    FILEGROWTH = 1MB)
LOG ON
( NAME = KUTDUSOV4310LAB1_LOG,
    FILENAME = 'C:\Users\800216\source\repos\Labs_DB\Lab1_DB_SQL_DATABASE\KUTDUSOV4310LAB1_LOG.ldf',
    SIZE = 2MB,
    MAXSIZE = 5MB,
    FILEGROWTH = 1MB)
EXEC sp_helpdb KUTDUSOV4310LAB1
ALTER DATABASE [KUTDUSOV4310LAB1] MODIFY FILE ( NAME = KUTDUSOV4310LAB1_DATA, MAXSIZE = 15MB)
DROP DATABASE KUTDUSOV4310LAB1
CREATE DATABASE KUTDUSOV4310LAB1
USE KUTDUSOV4310LAB1
GO
CREATE TABLE TABLE1(ID int not null, FIO VARCHAR(20) NULL, DATA DATETIME)
USE KUTDUSOV4310LAB1
GO
INSERT INTO TABLE1 (ID, FIO, DATA)
VALUES (1, 'qwerty', 2000-01-01)
INSERT INTO TABLE1 (ID, FIO, DATA)
VALUES (2, 'qwerty', 2000-01-02)
INSERT INTO TABLE1 (ID, FIO, DATA)
VALUES (3, 'qwerty', 2000-01-03)
INSERT INTO TABLE1 (ID, FIO, DATA)
VALUES (4, 'qwerty', 2000-01-04)

USE KUTDUSOV4310LAB1
GO
SELECT * FROM TABLE1
ALTER DATABASE KUTDUSOV4310LAB1 ADD FILEGROUP GROUP1
ALTER DATABASE KUTDUSOV4310LAB1
ADD FILE ( NAME = NEWFILE, FILENAME = 'C:\Users\800216\source\repos\Labs_DB\Lab1_DB_SQL_DATABASE\KUTDUSOV4310LAB1_NEWFILE.ndf') TO FILEGROUP GROUP1
ALTER DATABASE KUTDUSOV4310LAB1 MODIFY FILEGROUP GROUP1 DEFAULT
CREATE DATABASE KUTDUSOV4310LAB1_snapshot ON
(NAME = KUTDUSOV4310LAB1, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Data\KUTDUSOV4310LAB1_data.ss'),
(NAME = NEWFILE, FILENAME = 'C:\Documents and Settings\userSQL-SRV-TEST\Desktop\4310\KUTDUSOV4310LAB1\KUTDUSOV4310LAB1_NEWFILE.ss')
AS SNAPSHOT OF KUTDUSOV4310LAB1
USE KUTDUSOV4310LAB1
GO
SELECT * FROM TABLE1 WHERE ID=3
USE KUTDUSOV4310LAB1_snapshot
GO
SELECT * FROM TABLE1 WHERE ID=3
USE KUTDUSOV4310LAB1
GO
UPDATE TABLE1 SET FIO='UPDATE_FIO' WHERE ID=3